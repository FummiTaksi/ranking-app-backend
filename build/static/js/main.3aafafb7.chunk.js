(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t,n){e.exports=n(392)},392:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(56),l=n.n(i),c=n(20),o=n(24),u=n(25),s=n(29),d=n(26),p=n(28),m=n(398),g=n(406),h=n(407),f=n(404),v=n(104),E=n(405),b=n(57),y=n(18);var k=function(e){var t=e.text,n=e.type,a=e.name,i=e.value,l=e.onChange;return r.a.createElement("div",null,t,r.a.createElement("input",{type:n,name:a,value:i,onChange:l}))},O=n(7),N=n.n(O),w=n(16),j=n(35),R=n.n(j),C={login:function(){var e=Object(w.a)(N.a.mark(function e(t){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},I={icon:"",header:"",message:""},x=function(e,t){e({type:"CHANGE_NOTIFICATION",message:t}),setTimeout(function(){e({type:"CHANGE_NOTIFICATION",message:{icon:"",header:"",message:""}})},5e3)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;return"CHANGE_NOTIFICATION"===t.type?t.message:e},A={username:void 0,admin:void 0,token:""},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;if("LOGIN"===t.type){var n={username:t.username,admin:t.admin,token:t.token};return window.localStorage.setItem("loggedUser",JSON.stringify(n)),{username:t.username,admin:t.admin,token:t.token}}return"LOGOUT"===t.type?(window.localStorage.removeItem("loggedUser"),{username:void 0,admin:void 0,token:""}):e},S=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:""},n.handleFormChange=n.handleFormChange.bind(Object(y.a)(Object(y.a)(n))),n.logIn=n.logIn.bind(Object(y.a)(Object(y.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleFormChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"logIn",value:function(e){e.preventDefault();var t=this.props.logIn;t(this.state),this.setState({username:"",password:""})}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",null,r.a.createElement("h2",null,"Signing in is only available for admin!"),r.a.createElement("form",{onSubmit:this.logIn},r.a.createElement(k,{type:"input",text:"Username:",name:"username",value:t,onChange:this.handleFormChange}),r.a.createElement(k,{type:"password",text:"Password:",name:"password",value:n,onChange:this.handleFormChange}),r.a.createElement("button",{type:"submit"},"Log in"," ")))}}]),t}(r.a.Component),F={logIn:function(e){return function(){var t=Object(w.a)(N.a.mark(function t(n){var a,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.login(e);case 3:a=t.sent,n({type:"LOGIN",username:a.username,admin:a.admin,token:a.token}),r="Welcome back, ".concat(a.username,"!"),x(n,{header:"Login successfully!",content:r,icon:"sign in alternate"}),t.next=17;break;case 11:t.prev=11,t.t0=t.catch(0),x(n,{header:"Login failed!",content:"Wrong username or password!",icon:"thumbs down"});case 17:case"end":return t.stop()}},t,this,[[0,11]])}));return function(e){return t.apply(this,arguments)}}()}},_=Object(c.b)(null,F)(S),L=n(403);var P=Object(c.b)(function(e){return{notification:e.notification}})(function(e){var t=e.notification;return""===t.icon?null:r.a.createElement("div",{className:"success"},r.a.createElement(L.a,{icon:t.icon,header:t.header,content:t.content}))}),D=n(176),B=n(30),U=n(175),H="",K=function(){return{headers:{Authorization:H}}},Y=function(){var e=Object(w.a)(N.a.mark(function e(t){var n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("/api/ranking","/new"),e.next=3,R.a.post(n,t,K());case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(w.a)(N.a.mark(function e(t){var n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("/api/ranking","/").concat(t),e.next=3,R.a.delete(n,K());case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(w.a)(N.a.mark(function e(t){var n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("/api/ranking","/").concat(t),e.next=3,R.a.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),J={createRanking:Y,getRankings:function(){var e=Object(w.a)(N.a.mark(function e(){var t,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("/api/ranking","/"),e.next=3,R.a.get(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),deleteRanking:M,getRanking:W},z={allRankings:[],selectedRanking:{},loading:!1},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;if("CREATE_RANKING"===t.type){var n=[].concat(Object(U.a)(e.allRankings),[t.content.ranking]);return Object(B.a)({},e,{allRankings:n,loading:!1})}if("CREATING_RANKING"===t.type)return Object(B.a)({},e,{loading:!0});if("SETTING_RANKINGS"===t.type)return Object(B.a)({},e,{loading:!0});if("SET_RANKINGS"===t.type)return Object(B.a)({},e,{allRankings:t.content.rankings,loading:!1});if("DELETING_RANKING"===t.type)return Object(B.a)({},e,{loading:!0});if("DELETE_RANKING"===t.type){var a=e.allRankings.filter(function(e){return e._id!==t.content.deletedRanking._id});return Object(B.a)({},e,{allRankings:a,loading:!1})}return"GETTING_RANKING"===t.type?Object(B.a)({},e,{loading:!0}):"GET_RANKING"===t.type?Object(B.a)({},e,{selectedRanking:t.content.ranking,loading:!1}):e},V=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(d.a)(t).call(this))).state={rankingFileBase64:void 0,rankingFileName:"",rankingName:"",rankingDate:(new Date).toString()},e.handleFormChange=e.handleFormChange.bind(Object(y.a)(Object(y.a)(e))),e.onDrop=e.onDrop.bind(Object(y.a)(Object(y.a)(e))),e.handleFormChange=e.handleFormChange.bind(Object(y.a)(Object(y.a)(e))),e.sendFile=e.sendFile.bind(Object(y.a)(Object(y.a)(e))),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onDrop",value:function(e){var t=this,n=e[0],a=new FileReader;a.onload=function(e){t.setState({rankingFileBase64:e.target.result,rankingFileName:n.name})},a.readAsDataURL(n)}},{key:"sendFile",value:function(e){e.preventDefault();var t=this.state,n={rankingFileBase64:t.rankingFileBase64,rankingName:t.rankingName,rankingDate:t.rankingDate};(0,this.props.createNewRanking)(n),this.setState({rankingFileBase64:void 0,rankingFileName:"",rankingName:"",rankingDate:""})}},{key:"handleFormChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"renderUploadForm",value:function(){var e=this.state,t=e.rankingFileBase64,n=e.rankingName,a=e.rankingDate;return t?r.a.createElement("form",{onSubmit:this.sendFile},r.a.createElement(k,{type:"input",text:"Name of ranking:",name:"rankingName",value:n,onChange:this.handleFormChange}),r.a.createElement(k,{type:"date",text:"Date of competition:",name:"rankingDate",value:a,onChange:this.handleFormChange}),r.a.createElement("button",{type:"submit"},"Upload")):null}},{key:"renderDroppedFileName",value:function(){var e=this.state,t=e.rankingFileBase64,n=e.rankingFileName;if(t){var a="Filename: ".concat(n);return r.a.createElement("p",null,a)}return null}},{key:"renderDropzone",value:function(){return r.a.createElement("div",{id:"fileDrop"},r.a.createElement("h3",null,"Drop excel file to create new ranking"),r.a.createElement(D.a,{className:"field upload-box",onDrop:this.onDrop,multiple:!1,accept:".xls"},r.a.createElement("div",{className:"field",style:{borderStyle:"dashed"}},r.a.createElement("p",{className:"upload-p"},"Click to navigate to the file or drag and drop them here."),r.a.createElement("br",null))))}},{key:"renderFileUploadingForm",value:function(){return r.a.createElement("div",null,this.renderDropzone(),this.renderDroppedFileName(),this.renderUploadForm())}},{key:"render",value:function(){var e=this.props.credentials.admin;return r.a.createElement("div",null,e&&this.renderFileUploadingForm(),!e&&r.a.createElement("h3",null,"You are not allowed to be here"))}}]),t}(r.a.Component),Q={createNewRanking:function(e){return function(){var t=Object(w.a)(N.a.mark(function t(n){var a,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"CREATING_RANKING"}),t.next=4,J.createRanking(e);case 4:a=t.sent,r="Ranking ".concat(e.rankingName," was created succsefully!"),n({type:"CREATE_RANKING",content:a}),x(n,{header:r,content:"Click Rankings to view ranking you created.",icon:"thumbs up"}),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(0),x(n,{header:"Error occured while creating ranking",content:"Make sure excel file is correct rating file",icon:"thumbs down"});case 18:case"end":return t.stop()}},t,this,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()}},X=Object(c.b)(function(e){return{credentials:e.login}},Q)(V),Z=n(402),$=function(e){return new Date(e.date).getTime()},ee=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getAllRankings,e.next=3,t();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deleteRanking",value:function(e){(0,this.props.deleteRankingById)(e)}},{key:"deleteButton",value:function(e){var t=this;return r.a.createElement("button",{type:"button",className:"delete",onClick:function(){return t.deleteRanking(e)}},"Delete")}},{key:"renderRankingCell",value:function(e){var t=e.date.substring(0,10),n="/rankings/".concat(e._id),a=this.props.credentials.admin;return r.a.createElement(Z.a.Row,{key:e._id},r.a.createElement(Z.a.Cell,null,r.a.createElement(m.a,{to:n}," ",e.competitionName)),r.a.createElement(Z.a.Cell,null,t),r.a.createElement(Z.a.Cell,null,e.positions.length),r.a.createElement(Z.a.Cell,null,a&&this.deleteButton(e._id)))}},{key:"render",value:function(){var e=this,t=this.props.ranking,n=t.allRankings;if(t.loading)return r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui active inverted dimmer"},r.a.createElement("div",{className:"ui textloader"},"Loading rankings from database")));if(0===n.length)return r.a.createElement("p",{id:"noRankings"},"No rankings saved to database yet");var a=n.slice().sort(function(e,t){return $(t)-$(e)});return r.a.createElement("div",{id:"rankingList"},r.a.createElement("h3",null,"Here are all ".concat(a.length," rankings that are uploaded to this site")),r.a.createElement(Z.a,null,r.a.createElement(Z.a.Header,null,r.a.createElement(Z.a.Row,null,r.a.createElement(Z.a.HeaderCell,null,"Competition name"),r.a.createElement(Z.a.HeaderCell,null,"Date"),r.a.createElement(Z.a.HeaderCell,null,"Players"),r.a.createElement(Z.a.HeaderCell,null))),r.a.createElement(Z.a.Body,null,a.map(function(t){return e.renderRankingCell(t)}))))}}]),t}(r.a.Component),te={getAllRankings:function(){return function(){var e=Object(w.a)(N.a.mark(function e(t){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SETTING_RANKINGS"}),e.next=4,J.getRankings();case 4:n=e.sent,t({type:"SET_RANKINGS",content:n}),x(t,{header:"Rankings fetched successfully!",content:"",icon:"list ul"}),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(0),x(t,{header:"Error while fetching rankings",content:"Try again later",icon:"thumbs down"});case 18:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()},deleteRankingById:function(e){return function(){var t=Object(w.a)(N.a.mark(function t(n){var a,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"DELETING_RANKING"}),t.next=4,J.deleteRanking(e);case 4:a=t.sent,r="Ranking ".concat(a.deletedRanking.competitionName," was deleted succsefully!"),n({type:"DELETE_RANKING",content:a}),x(n,{header:r,content:"Page should update list automatically",icon:"thumbs up"}),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(0),x(n,{header:"Error occured while deleting ranking",content:"Try again later",icon:"thumbs down"});case 18:case"end":return t.stop()}},t,this,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()}},ne=Object(c.b)(function(e){return{ranking:e.ranking,credentials:e.login}},te)(ee),ae=function(e){return r.a.createElement(Z.a.Row,{key:e._id},r.a.createElement(Z.a.Cell,null,e.position),r.a.createElement(Z.a.Cell,null,e.playerName),r.a.createElement(Z.a.Cell,null,e.clubName),r.a.createElement(Z.a.Cell,null,e.rating))};var re=function(e){var t=e.positions;return r.a.createElement("div",null,r.a.createElement(Z.a,null,r.a.createElement(Z.a.Header,null,r.a.createElement(Z.a.Row,null,r.a.createElement(Z.a.HeaderCell,null,"Position"),r.a.createElement(Z.a.HeaderCell,null,"Player"),r.a.createElement(Z.a.HeaderCell,null,"Club"),r.a.createElement(Z.a.HeaderCell,null,"Rating"))),r.a.createElement("tbody",null,t.map(function(e){return ae(e)}))))},ie=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={selectedIndex:0},n.toggleLeft=n.toggleLeft.bind(Object(y.a)(Object(y.a)(n))),n.toggleRight=n.toggleRight.bind(Object(y.a)(Object(y.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location;(0,e.getRankingById)(t.match.params.rankingId)}},{key:"toggleLeft",value:function(){var e=this.state.selectedIndex;this.setState({selectedIndex:e-1})}},{key:"toggleRight",value:function(){var e=this.state.selectedIndex;this.setState({selectedIndex:e+1})}},{key:"renderNavigationButtons",value:function(e){var t=this.state.selectedIndex;return r.a.createElement("div",{id:"navigationButtons"},r.a.createElement(E.a,{onClick:this.toggleLeft,disabled:0===t},r.a.createElement(v.a,{name:"angle double left"})),r.a.createElement(E.a,{onClick:this.toggleRight,disabled:t===e-1},r.a.createElement(v.a,{name:"angle double right"})))}},{key:"render",value:function(){var e=this.props.ranking;if(e.loading)return r.a.createElement("div",{className:"ui segment"},r.a.createElement("div",{className:"ui active inverted dimmer"},r.a.createElement("div",{className:"ui textloader"},"Loading ranking from database")));var t=e.selectedRanking;if(!t.positions)return r.a.createElement("p",null,"No ranking with this id!");var n=function(e){return e.positions.slice().sort(function(e,t){return e.position-t.position})}(t),a=function(e){var t=0;return e.reduce(function(e,n){var a=e;return a[t]&&e[t].length>=100&&(t+=1),e[t]||(a[t]=[]),a[t].push(n),a},[])}(n),i="".concat(t.competitionName,", players ").concat(n.length),l=this.state.selectedIndex,c="Showing page ".concat(l+1," / ").concat(a.length);return r.a.createElement("div",null,r.a.createElement("h3",null,i),r.a.createElement("h4",null,c),this.renderNavigationButtons(a.length),r.a.createElement(re,{positions:a[l]}),this.renderNavigationButtons(a.length))}}]),t}(r.a.Component),le={getRankingById:function(e){return function(){var t=Object(w.a)(N.a.mark(function t(n){var a,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"GETTING_RANKING"}),t.next=4,J.getRanking(e);case 4:a=t.sent,r="Ranking ".concat(a.ranking.competitionName," fetched successfully!"),n({type:"GET_RANKING",content:a}),x(n,{header:r,content:"Have fun browsing!",icon:"trophy"}),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(0),x(n,{header:"Error while fetching ranking",content:"Try again later",icon:"thumbs down"});case 18:case"end":return t.stop()}},t,this,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()}},ce=Object(c.b)(function(e){return{ranking:e.ranking}},le)(ie),oe={getPlayers:function(){var e=Object(w.a)(N.a.mark(function e(){var t,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("/api/players","/"),e.next=3,R.a.get(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getPlayer:function(){var e=Object(w.a)(N.a.mark(function e(t){var n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("/api/players","/").concat(t),e.next=3,R.a.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},ue={players:[],selectedPlayer:void 0,loading:!1,error:!1},se=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,n=arguments.length>1?arguments[1]:void 0;return"GETTING_PLAYERS"===(e=n.type)||"GETTING_PLAYER"===e?Object(B.a)({},t,{loading:!0,error:!1}):"GET_PLAYERS_SUCCESS"===n.type?Object(B.a)({},t,{players:n.content.players,loading:!1,error:!1}):"GET_PLAYER_SUCCESS"===n.type?Object(B.a)({},t,{selectedPlayer:n.content.player,loading:!1,error:!1}):function(e){return"GET_PLAYERS_FAILURE"===e||"GET_PLAYER_FAILURE"===e}(n.type)?Object(B.a)({},t,{loading:!1,error:!0}):t},de=n(408),pe=function(){return r.a.createElement("div",null,r.a.createElement(de.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(v.a,{name:"chart line",circular:!0}),r.a.createElement(de.a.Content,null,"All rating data in one place"),r.a.createElement("div",{className:"sub header"},"Filter players by writing players name, click players name to view statistics"),r.a.createElement("div",{className:"sub header"},"NOTE: Write surname before firstname")))},me=n(399);var ge=function(e){var t=e.handleNameChange,n=e.playerName;return r.a.createElement("div",null,"Name:",r.a.createElement(me.a,{type:"text",onChange:t,value:n,text:"Name"}))},he=n(401),fe=function(e){return r.a.createElement(he.a.Item,{key:e._id,id:e._id},r.a.createElement(m.a,{to:"/players/".concat(e._id)},e.name))};var ve=function(e){var t=e.players;return r.a.createElement(he.a,{id:"playerList"},t.map(function(e){return fe(e)}))},Ee=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(d.a)(t).call(this))).state={playerName:"",filteredPlayers:[]},e.handleNameChange=e.handleNameChange.bind(Object(y.a)(Object(y.a)(e))),e.filterPlayers=e.filterPlayers.bind(Object(y.a)(Object(y.a)(e))),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(N.a.mark(function e(){var t,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getAllPlayers,n=this.state.playerName,e.next=4,t();case 4:this.filterPlayers(n);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleNameChange",value:function(e){this.setState({playerName:e.target.value}),this.filterPlayers(e.target.value)}},{key:"filterPlayers",value:function(e){var t=this.props.player.players.filter(function(t){return function(e,t){return e.toLowerCase().includes(t.toLowerCase())}(t.name,e)});this.setState({filteredPlayers:t})}},{key:"amountOfResults",value:function(){var e=this.state.filteredPlayers.length;return 0===e?r.a.createElement("h2",null,"No players found"):r.a.createElement("h2",null,"Showing ".concat(e," players that matched your search"))}},{key:"render",value:function(){var e=this.props.player;if(!e||e.loading)return r.a.createElement("p",null,"Please be patient :)");if(e.error)return r.a.createElement("p",null,"Error");var t=this.state,n=t.playerName,a=t.filteredPlayers;return r.a.createElement("div",null,r.a.createElement(pe,null),r.a.createElement(ge,{handleNameChange:this.handleNameChange,playerName:n}),this.amountOfResults(),r.a.createElement(ve,{players:a}))}}]),t}(r.a.Component),be={getAllPlayers:function(){return function(){var e=Object(w.a)(N.a.mark(function e(t){var n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GETTING_PLAYERS"}),e.next=4,oe.getPlayers();case 4:n=e.sent,t({type:"GET_PLAYERS_SUCCESS",content:n}),x(t,{header:"Players fetched successfully!",content:"",icon:"list ul"}),e.next=19;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:"GET_PLAYERS_FAILURE"}),x(t,{header:"Error while fetching players",content:"Try again later",icon:"thumbs down"});case 19:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()}},ye=Object(c.b)(function(e){return{player:e.player}},be)(Ee),ke=n(170);var Oe=function(e){var t=e.header,n=e.label,a=e.labels,i=e.data,l=e.options,c={labels:a,datasets:[{label:n,fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:i}]};return r.a.createElement("div",null,r.a.createElement("h2",null,t),r.a.createElement(ke.a,{data:c,options:l}))},Ne=function(e){return e.map(function(e){return e.date.substring(0,10)})},we=function(e){return e.map(function(e){return e.rating})},je=function(e){return e.map(function(e){return e.position})};var Re=function(e){var t=e.positions,n=Ne(t),a=we(t),i=je(t);return r.a.createElement("div",null,r.a.createElement(Oe,{labels:n,data:a,header:"Rating over time",label:"Rating",options:{scales:{yAxes:[{ticks:{reverse:!1}}]}}}),r.a.createElement(Oe,{labels:n,data:i,header:"Position in mens ranking over time",label:"Position",options:{scales:{yAxes:[{ticks:{reverse:!0}}]}}}))},Ce=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location;(0,e.getPlayerById)(t.match.params.playerId)}},{key:"render",value:function(){var e=this.props.player,t=e.selectedPlayer;if(!e||e.loading)return r.a.createElement("p",null,"Loading");if(!t||e.error)return r.a.createElement("p",null,"Error");var n=t.positions.sort(function(e,t){var n=new Date(e.date),a=new Date(t.date);return n.getTime()-a.getTime()});return r.a.createElement("div",{id:"playerView"},r.a.createElement("h2",null,"Statistics of ".concat(t.name)),r.a.createElement(Re,{positions:n}))}}]),t}(r.a.Component),Ie={getPlayerById:function(e){return function(){var t=Object(w.a)(N.a.mark(function t(n){var a,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"GETTING_PLAYER"}),t.next=4,oe.getPlayer(e);case 4:a=t.sent,r="Player ".concat(a.player.name," fetched successfully!"),n({type:"GET_PLAYER_SUCCESS",content:a}),x(n,{header:r,content:"",icon:"list ul"}),t.next=19;break;case 12:t.prev=12,t.t0=t.catch(0),n({type:"GET_PLAYER_FAILURE"}),x(n,{header:"Error while fetching player",content:"Try again later",icon:"thumbs down"});case 19:case"end":return t.stop()}},t,this,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()}},xe=Object(c.b)(function(e){return{player:e.player}},Ie)(Ce),Te=n(409),Ae=n(400),Ge=function(){return r.a.createElement("div",{id:"aboutPage"},r.a.createElement(de.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(v.a,{name:"table tennis",circular:!0}),r.a.createElement(de.a.Content,null,"Welcome to Ranking-app!")),r.a.createElement(Te.a,null,"Purpose of this website is to offer long term statisctics for players who play in Finland.",r.a.createElement(Ae.a,null),"This website is developed in co-operation with Finnish table tennis union:"," ",r.a.createElement("a",{href:"http://www.sptl.fi/sptl_uudet/"},"www.sptl.fi"),r.a.createElement(Ae.a,null),r.a.createElement(v.a,{name:"github",circular:!0}),"View source code:"," ",r.a.createElement("a",{href:"https://github.com/FummiTaksi/ranking-app-backend"},"https://github.com/FummiTaksi/ranking-app-backend"),r.a.createElement(Ae.a,null),"Any questions or suggestions?"," ",r.a.createElement("a",{href:"mailto:mustonealeksi@gmail.com"},"Please contact")))},Se=function(e,t,n){return r.a.createElement(f.a.Item,null,r.a.createElement(m.a,{to:e},t,r.a.createElement(v.a,{name:n})))},Fe=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.initUser)()}},{key:"logInOrLogOut",value:function(){var e=this.props,t=e.credentials,n=e.logOut,a=t.username;return a?r.a.createElement("div",{id:"loggedIn"},r.a.createElement("p",null,"You are logged in as ".concat(a," ")),r.a.createElement(E.a,{id:"logOut",onClick:function(){return n()}},r.a.createElement(v.a,{name:"sign out alternate"}),"Logout")):r.a.createElement("div",null,Se("/signin","Sign in","sign in alternate"))}},{key:"renderUploadLink",value:function(){return this.props.credentials.username?r.a.createElement("div",null,Se("/upload","Create new ranking","plus")):null}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement("div",null,r.a.createElement(f.a,null,Se("/","Players","id card"),this.renderUploadLink(),Se("/rankings","Rankings","ordered list"),Se("/about","About","question circle"),this.logInOrLogOut()),r.a.createElement(h.a,{exact:!0,path:"/about",render:function(){return r.a.createElement(Ge,null)}}),r.a.createElement(h.a,{exact:!0,path:"/signin",render:function(){return r.a.createElement(_,null)}}),r.a.createElement(h.a,{exact:!0,path:"/upload",render:function(){return r.a.createElement(X,null)}}),r.a.createElement(h.a,{exact:!0,path:"/rankings",render:function(){return r.a.createElement(ne,null)}}),r.a.createElement(h.a,{exact:!0,path:"/rankings/:rankingId",render:function(e){return r.a.createElement(ce,{location:e})}}),r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(ye,null)}}),r.a.createElement(h.a,{exact:!0,path:"/players/:playerId",render:function(e){return r.a.createElement(xe,{location:e})}}))),r.a.createElement(P,null))}}]),t}(r.a.Component),_e={logOut:function(){return function(){var e=Object(w.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"}),x(t,{header:"Logout successfully!",content:"Thank you, come again!",icon:"sign out alternate"});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},initUser:function(){return function(){var e=Object(w.a)(N.a.mark(function e(t){var n,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=window.localStorage.getItem("loggedUser"))&&(a=JSON.parse(n),t({type:"LOGIN",username:a.username,admin:a.admin,token:a.token}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},Le=Object(c.b)(function(e){return{credentials:e.login}},_e)(Fe),Pe=n(58),De=n(174),Be=Object(Pe.c)({notification:T,login:G,ranking:q,player:se}),Ue=Object(Pe.d)(Be,Object(Pe.a)(De.a,function(e){return function(t){return function(n){t(n);var a=e.getState().login.token;H="bearer ".concat(a)}}}));l.a.render(r.a.createElement(c.a,{store:Ue},r.a.createElement(Le,null)),document.getElementById("root"))}},[[187,2,1]]]);
//# sourceMappingURL=main.3aafafb7.chunk.js.map